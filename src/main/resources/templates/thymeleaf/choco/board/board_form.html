<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="display:flex; justify-content:center">
<div style="width:80%;">
	<div style="text-align:center;">
		<h1> This is post form page. </h1>
	</div>
	
	<form action="./add" method="post" enctype="multipart/form-data" oninput="markFormAsDirty()" th:object="${board}">
	    <div class="mb-3">
		    <select class="form-select" required><!--th:field="*{boardCategory}"-->
		        <option value="1">강아지</option>
		        <option value="2">고양이</option>
		        <option value="3">소동물</option>
		    </select>
		</div>
		
		<div class="mb-3">
	  	    <label for="validationTextarea" class="form-label">제목</label>
	        <input type="text" class="form-control" placeholder="제목을 입력해주세요." required />
	    </div>
	  
		<div class="mb-3">
	  	    <label for="validationTextarea" class="form-label">내용</label>
	        <textarea class="form-control" placeholder="내용을 입력하세요." required></textarea>
	    </div>

	    <div class="mb-3">
	        <input type="file" class="form-control" required>
	    </div>
	
	    <div class="mb-3">
	        <button class="btn btn-primary" type="submit">등록</button>
	    </div>
	</form>
</div>

  <script>
      // 폼에 데이터가 입력된 상태에서 경고 메시지 표시
      let isFormDirty = false;

      // 폼 데이터가 변경될 때 isFormDirty를 true로 설정
      function markFormAsDirty() {
          isFormDirty = true;
          console.log("it's durty!");
      }

      // beforeunload 이벤트 리스너
      window.addEventListener('beforeunload', function(event) {
          if (isFormDirty) {
              // 기본적으로 제공되는 경고 메시지를 표시하도록 설정
              const message = '변경사항이 저장되지 않을 수 있습니다. 페이지를 떠나시겠습니까?';
              event.returnValue = message;  // Chrome, Firefox 등에서 경고 메시지를 표시
              return message; // 다른 브라우저에서 경고 메시지를 표시
          }
      });
  </script>

</body>
</html>
